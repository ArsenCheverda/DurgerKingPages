<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Durger King - Mini App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="main-container">

        <!-- ===== Page 1: Catalog ===== -->
        <div id="catalog-page" class="page active">
            <div class="header p-4 flex items-center justify-between shadow-sm">
                <i class="fas fa-times text-xl text-gray-500 cursor-pointer"></i>
                <div class="font-bold text-lg flex items-center">
                    <span class="bg-red-500 text-white rounded-md w-7 h-7 flex items-center justify-center mr-2 font-bold">D</span>
                    Durger King
                </div>
                <div class="flex items-center space-x-4">
                    <i class="fas fa-plus text-xl text-gray-500 cursor-pointer"></i>
                    <i class="fas fa-expand text-xl text-gray-500 cursor-pointer"></i>
                </div>
            </div>
            <div id="catalog-grid" class="flex-grow p-4 grid grid-cols-2 gap-4 overflow-y-auto">
                <!-- Product items will be injected here by JavaScript -->
            </div>
            <div class="bottom-bar p-4">
                <button id="view-order-btn" class="btn-primary">View Order</button>
            </div>
        </div>

        <!-- ===== Page 2: Your Order ===== -->
        <div id="order-page" class="page">
            <div class="header p-4 flex items-center justify-between shadow-sm">
                <i class="fas fa-arrow-left text-xl text-gray-500 cursor-pointer" onclick="showPage('catalog-page')"></i>
                 <div class="font-bold text-lg flex items-center">
                    <span class="bg-red-500 text-white rounded-md w-7 h-7 flex items-center justify-center mr-2 font-bold">D</span>
                    Durger King
                </div>
                <div class="flex items-center space-x-4">
                    <i class="fas fa-plus text-xl text-gray-500 cursor-pointer"></i>
                    <i class="fas fa-expand text-xl text-gray-500 cursor-pointer"></i>
                </div>
            </div>
            <div class="flex-grow p-4 overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold">YOUR ORDER</h2>
                    <button class="text-green-600 font-semibold" onclick="showPage('catalog-page')">Edit</button>
                </div>
                <div id="order-list" class="space-y-4">
                    <!-- Order items will be injected here -->
                </div>
                <div class="mt-6">
                    <label for="comment" class="text-gray-600">Add comment...</label>
                    <textarea id="comment" rows="3" class="w-full mt-1 p-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none" placeholder="Any special requests, details, final wishes etc."></textarea>
                </div>
            </div>
            <div class="bottom-bar p-4">
                <button id="pay-from-order-btn" class="btn-primary">PAY $0.00</button>
            </div>
        </div>

        <!-- ===== Page 3: Checkout ===== -->
        <div id="checkout-page" class="page">
            <div class="header p-4 flex items-center shadow-sm">
                 <i class="fas fa-arrow-left text-xl text-gray-500 cursor-pointer mr-4" onclick="showPage('order-page')"></i>
                <h2 class="text-lg font-bold">Checkout (Test)</h2>
                <div class="flex-grow"></div>
                <i id="close-checkout-btn" class="fas fa-times text-xl text-gray-500 cursor-pointer"></i>
            </div>
            <div class="flex-grow p-4 overflow-y-auto bg-gray-50">
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="flex items-center">
                         <div class="checkout-emoji-wrapper bg-yellow-400 p-2 rounded-lg mr-4">
                             <picture width="48" height="48">
                                <source type="application/x-tgsticker" srcset="https://cdn.jsdelivr.net/gh/Telegram-Mini-Apps/TGS-emojis@main/emojis/Food%20and%20Drink/French%20Fries.tgs">
                                <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="Fries" width="48" height="48">
                            </picture>
                         </div>
                        <div>
                            <p class="font-bold">Order #160546591</p>
                            <p class="text-sm text-gray-500">Perfect Lunch from Durger King.</p>
                        </div>
                    </div>
                    <div id="checkout-summary" class="mt-4 space-y-2 border-t pt-4">
                        <!-- Checkout items summary here -->
                    </div>
                    <div class="flex justify-between font-bold text-lg mt-4 border-t pt-4">
                        <span>Total</span>
                        <span id="checkout-total-price">$0.00</span>
                    </div>
                </div>

                <div class="bg-white p-4 rounded-lg shadow-sm mt-4">
                    <div class="flex items-center justify-between cursor-pointer py-2" onclick="showPage('payment-page')">
                        <div class="flex items-center">
                            <i class="fas fa-credit-card text-gray-500 w-6 text-center mr-3"></i>
                            <div id="payment-method-details">
                                <p class="font-semibold">Payment method</p>
                                <p id="payment-method-text" class="text-sm text-blue-500">Add payment method</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                     <div class="border-t"></div>
                    <div class="flex items-center justify-between cursor-pointer py-2" onclick="showPage('shipping-page')">
                        <div class="flex items-center">
                            <i class="fas fa-map-marker-alt text-gray-500 w-6 text-center mr-3"></i>
                             <div>
                                <p class="font-semibold">Shipping address</p>
                                <p id="shipping-address-text" class="text-sm text-blue-500">Add shipping address</p>
                            </div>
                        </div>
                         <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                     <div class="border-t"></div>
                    <div id="name-link-block" class="flex items-center justify-between cursor-pointer py-2" onclick="showPage('shipping-page')">
                         <div class="flex items-center">
                            <i class="fas fa-user text-gray-500 w-6 text-center mr-3"></i>
                            <div id="name-placeholder">
                                 <p class="font-semibold">Name</p>
                            </div>
                            <div id="name-details" style="display: none;">
                                <p id="shipping-name-text" class="font-semibold"></p>
                                <p id="shipping-phone-text" class="text-sm text-gray-500"></p>
                            </div>
                        </div>
                         <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                </div>
            </div>
            <div class="bottom-bar p-4">
                <button id="final-pay-btn" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg">PAY $0.00</button>
            </div>
        </div>
        
        <!-- ===== Page 4: Payment Info ===== -->
        <div id="payment-page" class="page">
             <div class="header p-4 flex items-center shadow-sm">
                 <i class="fas fa-times text-xl text-gray-500 cursor-pointer" onclick="showPage('checkout-page')"></i>
                <div class="flex-grow text-center">
                    <h2 class="text-lg font-bold">Payment info</h2>
                </div>
                <div class="w-5"></div> <!-- Placeholder to balance the title -->
            </div>
            <div id="payment-form" class="flex-grow p-4 overflow-y-auto">
                <p class="text-blue-600 font-semibold mb-2">Enter your card information</p>
                <div class="space-y-4 mb-6">
                    <div class="relative">
                        <label for="card-number" id="card-number-label" class="absolute -top-2 left-2 inline-block bg-white px-1 text-xs font-medium text-blue-600 transition-colors duration-200">Card Number</label>
                        <input type="text" id="card-number" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 transition-colors duration-200" placeholder="0000 0000 0000 0000">
                    </div>
                    <div class="flex space-x-4">
                        <div class="relative w-1/2">
                            <label for="expiry-date" id="expiry-date-label" class="absolute -top-2 left-2 inline-block bg-white px-1 text-xs font-medium text-blue-600 transition-colors duration-200">Expiry Date</label>
                            <input type="text" id="expiry-date" placeholder="MM/YY" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 transition-colors duration-200">
                        </div>
                        <div class="relative w-1/2">
                             <label for="cvc" id="cvc-label" class="absolute -top-2 left-2 inline-block bg-white px-1 text-xs font-medium text-gray-500 transition-colors duration-200">CVC</label>
                            <input type="password" id="cvc" placeholder="•••" class="w-full p-3 border-2 border-gray-300 rounded-lg pr-10 focus:outline-none focus:border-blue-500 transition-colors duration-200">
                            <i class="fas fa-eye absolute top-1/2 right-3 -translate-y-1/2 text-gray-400 cursor-pointer" id="toggle-cvc"></i>
                        </div>
                    </div>
                     <div class="relative">
                        <label for="cardholder-name" id="cardholder-name-label" class="absolute -top-2 left-2 inline-block bg-white px-1 text-xs font-medium text-blue-600 transition-colors duration-200">Cardholder Name</label>
                        <input type="text" id="cardholder-name" placeholder="Cardholder Name" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 transition-colors duration-200">
                    </div>
                </div>

                <p class="text-blue-600 font-semibold mb-2">Enter your billing address</p>
                 <div class="space-y-4">
                    <div class="relative">
                        <label for="country" id="country-label" class="absolute -top-2 left-2 inline-block bg-white px-1 text-xs font-medium text-blue-600 transition-colors duration-200">Country</label>
                        <select id="country" class="w-full p-3 border-2 border-gray-300 rounded-lg bg-white focus:outline-none focus:border-blue-500 transition-colors duration-200">
                            <option value="">Select Country</option>
                            <!-- Countries will be populated by JS -->
                        </select>
                    </div>
                     <div class="relative">
                        <label for="postcode" id="postcode-label" class="absolute -top-2 left-2 inline-block bg-white px-1 text-xs font-medium text-blue-600 transition-colors duration-200">Postcode</label>
                        <input type="text" id="postcode" placeholder="Postcode" maxlength="10" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 transition-colors duration-200">
                    </div>
                </div>

                <div class="flex items-start mt-6">
                    <input type="checkbox" id="save-payment" class="h-5 w-5 mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                    <label for="save-payment" class="ml-3 text-sm text-gray-600">
                        Save Payment Information
                        <p class="text-xs text-gray-500">Saving payment details is only available with 2-Step Verification.</p>
                    </label>
                </div>
            </div>
            <div class="bottom-bar p-4">
                 <button id="proceed-btn" class="w-full bg-blue-300 text-white font-bold py-3 rounded-lg cursor-not-allowed" disabled>PROCEED TO CHECKOUT</button>
            </div>
        </div>

        <!-- ===== Page 5: Shipping Info ===== -->
        <div id="shipping-page" class="page">
             <div class="header p-4 flex items-center shadow-sm">
                 <i class="fas fa-times text-xl text-gray-500 cursor-pointer" onclick="showPage('checkout-page')"></i>
                <div class="flex-grow text-center">
                    <h2 class="text-lg font-bold">Shipping Information</h2>
                </div>
                 <div class="w-5"></div>
            </div>
             <div class="flex-grow p-4 overflow-y-auto space-y-4">
                <input type="text" id="shipping-address-1" placeholder="Address 1 (Street)" class="w-full p-3 border rounded-lg">
                <input type="text" placeholder="Address 2 (Street)" class="w-full p-3 border rounded-lg">
                <input type="text" placeholder="City" class="w-full p-3 border rounded-lg">
                <input type="text" placeholder="State" class="w-full p-3 border rounded-lg">
                <select id="shipping-country" class="w-full p-3 border rounded-lg bg-white">
                    <option>Country</option>
                    <option>United States</option>
                    <option>Canada</option>
                </select>
                <input type="text" placeholder="Postcode" class="w-full p-3 border rounded-lg">
                
                <h3 class="font-semibold pt-4">Receiver</h3>
                <input type="text" id="shipping-full-name" placeholder="Full Name" class="w-full p-3 border rounded-lg">
                <input type="tel" id="shipping-phone-number" placeholder="Phone Number" class="w-full p-3 border rounded-lg">

                 <div class="flex items-center mt-2">
                    <input type="checkbox" id="save-shipping" class="h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                    <label for="save-shipping" class="ml-3 text-sm text-gray-600">Save Shipping Information</label>
                </div>
             </div>
             <div class="bottom-bar p-4">
                 <button id="save-shipping-btn" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg">SAVE & CONTINUE</button>
            </div>
        </div>
        
        <!-- ===== Page 6: Success ===== -->
        <div id="success-page" class="page">
            <div class="flex-grow flex flex-col items-center justify-center text-center p-8">
                <div id="success-animation" class="w-24 h-24 mb-6">
                    <picture width="96" height="96">
                        <source type="application/x-tgsticker" srcset="https://cdn.jsdelivr.net/gh/Telegram-Mini-Apps/TGS-emojis@main/emojis/Objects/Party%20Popper.tgs">
                        <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="Success" width="96" height="96">
                    </picture>
                </div>
                <h2 class="text-2xl font-bold mb-2">Thank You!</h2>
                <p class="text-gray-600 mb-8">Your order has been placed successfully.</p>
                <button id="back-to-catalog-btn" class="btn-primary w-full max-w-xs">Back to Catalog</button>
            </div>
        </div>
        
    </div>

    <!-- RLottie library for animated stickers -->
    <script src="rlottie.js"></script>
    <!-- Main application logic -->
    <script src="app.js"></script>

</body>
</html>
