<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Durger King - Mini App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <!-- Telegram Web App script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Lottie-Web library for animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
</head>
<body class="overflow-hidden">

    <div id="main-view" class="main-container">
        <!-- ===== View 1: Catalog ===== -->
        <div id="catalog-view" class="view active">
            <!-- Header is now handled by Telegram client -->
            <div id="catalog-grid" class="flex-grow p-4 grid grid-cols-2 gap-4 overflow-y-auto">
                <!-- Product items will be injected here by JavaScript -->
            </div>
        </div>

        <!-- ===== View 2: Your Order ===== -->
        <div id="order-view" class="view">
             <div class="header p-4 flex items-center justify-between shadow-sm">
                 <div class="font-bold text-lg flex items-center">
                    <span class="bg-red-500 text-white rounded-md w-7 h-7 flex items-center justify-center mr-2 font-bold">D</span>
                    Durger King
                </div>
                <button class="text-blue-500 font-semibold" id="edit-order-btn">Edit</button>
            </div>
            <div class="flex-grow p-4 overflow-y-auto">
                <h2 class="text-xl font-bold mb-4">YOUR ORDER</h2>
                <div id="order-list" class="space-y-4">
                    <!-- Order items will be injected here -->
                </div>
            </div>
        </div>
    </div>

    <!-- ===== POPUPS (Simulating Telegram behavior) ===== -->

    <!-- Checkout Popup -->
    <div id="checkout-popup" class="popup-overlay hidden">
        <div class="popup-content">
            <div class="popup-header">
                <h2 class="text-lg font-bold">Checkout (Test)</h2>
                <i id="close-checkout-popup" class="fas fa-times text-xl text-gray-500 cursor-pointer"></i>
            </div>
            <div class="popup-body">
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="flex items-center">
                         <div class="lottie-emoji w-16 h-16 mr-4" data-tgs-url="https://cdn.jsdelivr.net/gh/Telegram-Mini-Apps/TGS-emojis@main/emojis/Food%20and%20Drink/Hamburger.tgs"></div>
                        <div>
                            <p class="font-bold">Order #160546591</p>
                            <p class="text-sm text-gray-500">Perfect lunch from Durger King.</p>
                        </div>
                    </div>
                    <div id="checkout-summary" class="mt-4 space-y-2 border-t pt-4"></div>
                    <div class="flex justify-between font-bold text-lg mt-4 border-t pt-4">
                        <span>Total</span>
                        <span id="checkout-total-price">$0.00</span>
                    </div>
                </div>

                <div class="bg-white p-4 rounded-lg shadow-sm mt-4">
                    <div id="open-payment-popup" class="popup-link">
                        <div class="flex items-center">
                            <i class="fas fa-credit-card text-gray-500 w-6 text-center mr-3"></i>
                            <div id="payment-method-details">
                                <p class="font-semibold">Payment method</p>
                                <p id="payment-method-text" class="text-sm text-blue-500">Add payment method</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                    <div class="border-t"></div>
                    <div id="open-shipping-popup" class="popup-link">
                        <div class="flex items-center">
                            <i class="fas fa-map-marker-alt text-gray-500 w-6 text-center mr-3"></i>
                             <div>
                                <p class="font-semibold">Shipping address</p>
                                <p id="shipping-address-text" class="text-sm text-blue-500">Add shipping address</p>
                            </div>
                        </div>
                         <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                </div>
            </div>
            <div class="popup-footer">
                <button id="final-pay-btn" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg">PAY $0.00</button>
            </div>
        </div>
    </div>

    <!-- Payment Info Popup -->
    <div id="payment-popup" class="popup-overlay hidden">
        <div class="popup-content">
            <div class="popup-header">
                <i class="fas fa-arrow-left text-xl text-gray-500 cursor-pointer" data-target-popup="checkout-popup"></i>
                <h2 class="text-lg font-bold">Payment info</h2>
                <div class="w-5"></div>
            </div>
            <div class="popup-body">
                <p class="text-blue-600 font-semibold mb-2">Enter your card information</p>
                 <div class="space-y-4 mb-6">
                    <input type="text" id="card-number" class="w-full p-3 border-2 rounded-lg" placeholder="Card Number">
                    <div class="flex space-x-4">
                        <input type="text" id="expiry-date" placeholder="MM/YY" class="w-1/2 p-3 border-2 rounded-lg">
                        <input type="password" id="cvc" placeholder="CVC" class="w-1/2 p-3 border-2 rounded-lg">
                    </div>
                    <input type="text" id="cardholder-name" placeholder="Cardholder Name" class="w-full p-3 border-2 rounded-lg">
                </div>
            </div>
            <div class="popup-footer">
                <button id="proceed-btn" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg">PROCEED TO CHECKOUT</button>
            </div>
        </div>
    </div>

    <!-- Shipping Info Popup -->
    <div id="shipping-popup" class="popup-overlay hidden">
        <div class="popup-content">
             <div class="popup-header">
                <i class="fas fa-arrow-left text-xl text-gray-500 cursor-pointer" data-target-popup="checkout-popup"></i>
                <h2 class="text-lg font-bold">Shipping Information</h2>
                <div class="w-5"></div>
            </div>
             <div class="popup-body space-y-4">
                <input type="text" id="shipping-address-1" placeholder="Address" class="w-full p-3 border rounded-lg">
                <input type="text" id="shipping-full-name" placeholder="Full Name" class="w-full p-3 border rounded-lg">
                <input type="tel" id="shipping-phone-number" placeholder="Phone Number" class="w-full p-3 border rounded-lg">
             </div>
             <div class="popup-footer">
                 <button id="save-shipping-btn" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg">SAVE & CONTINUE</button>
            </div>
        </div>
    </div>
    
    <!-- Stars Payment Popup -->
    <div id="stars-popup" class="popup-overlay hidden">
        <div class="popup-content">
             <div class="popup-header">
                <h2 class="text-lg font-bold">Confirm Purchase</h2>
                <i class="fas fa-times text-xl text-gray-500 cursor-pointer" data-close-popup></i>
            </div>
             <div class="popup-body text-center">
                 <div id="stars-emoji-container" class="lottie-emoji w-24 h-24 mb-4"></div>
                 <h3 id="stars-product-name" class="text-xl font-bold"></h3>
                 <p class="text-gray-600 mb-6">Confirm purchase for 1 ⭐️</p>
             </div>
             <div class="popup-footer">
                 <button id="confirm-star-payment-btn" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg">Pay 1 ⭐️</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

